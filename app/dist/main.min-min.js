var productcatAnimations=angular.module("productcatAnimations",["ngAnimate"]);productcatAnimations.animation(".product",function(){var t=function(t,e,r){return"active"==e?(t.css({position:"absolute",top:500,left:0,display:"block"}),jQuery(t).animate({top:0},r),function(e){e&&t.stop()}):void 0},e=function(t,e,r){return"active"==e?(t.css({position:"absolute",left:0,top:0}),jQuery(t).animate({top:-500},r),function(e){e&&t.stop()}):void 0};return{addClass:t,removeClass:e}});var productcatApp=angular.module("productcatApp",["ui.router","ngMaterial","productcatAnimations","productcatControllers","productcatFilters","productcatServices","ngCart.directives"]);productcatApp.config(["$stateProvider","$urlRouterProvider","$mdThemingProvider",function(t,e,r){e.otherwise("/products"),t.state("home",{url:"/products",templateUrl:"partials/product-list.html",controller:"ProductListCtrl"}).state("productDetails",{url:"/products/:id",templateUrl:"partials/product-detail.html",controller:"ProductDetailCtrl"}),r.theme("default").primaryPalette("blue")}]).run(["$rootScope","ngCart","ngCartItem","store",function(t,e,r,n){t.$on("ngCart:change",function(){e.$save()}),angular.isObject(n.get("cart"))?e.$restore(n.get("cart")):e.init()}]);var productcatControllers=angular.module("productcatControllers",["angularPayments","ui.bootstrap","ngMaterial","ngAria","angularSpinner"]);productcatControllers.controller("ProductListCtrl",["$scope","Product","$timeout","$uibModal","$mdDialog","ngCart","$mdMedia","$mdSidenav","$log",function(t,e,r,n,i,o,a,c,s){function u(e,n,i){var o;return function(){var i=t,a=Array.prototype.slice.call(arguments);r.cancel(o),o=r(function(){o=void 0,e.apply(i,a)},n||10)}}function l(t){return u(function(){c(t).toggle().then(function(){s.debug("toggle "+t+" is done")})},200)}o.setTaxRate(7.5),o.setShipping(2.99),t.products=e.query(),t.orderProp="year",t.toggleLeft=l("left"),t.status="  ",t.customFullscreen=a("xs")||a("sm"),t.showPaymentDialog=function(e){var r=(a("sm")||a("xs"))&&t.customFullscreen;i.show({controller:"DialogController",templateUrl:"checkout.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,fullscreen:r}).then(function(e){t.status='You said the information was "'+e+'".'},function(){t.status="You cancelled the dialog."}),t.$watch(function(){return a("xs")||a("sm")},function(e){t.customFullscreen=e===!0})}}]),productcatControllers.controller("ProductDetailCtrl",["$scope","$stateParams","Product",function(t,e,r){t.product=r.get({id:e.id},function(e){t.mainImageUrl=e.images[0]}),t.setImage=function(e){t.mainImageUrl=e}}]),productcatControllers.controller("DialogController",["$scope","$mdDialog","ngCart",function(t,e,r){t.totalAmount=r.totalCost(),t.onSubmit=function(){t.processing=!0},t.stripeCallback=function(e,r){t.processing=!1,t.hideAlerts(),r.error?t.stripeError=r.error.message:t.stripeToken=r.id},t.hideAlerts=function(){t.stripeError=null,t.stripeToken=null},t.hide=function(){e.hide()},t.cancel=function(){e.cancel()},t.answer=function(t){e.hide(t)}}]),productcatControllers.controller("CartController",["$scope","Product","$uibModal","$mdDialog","ngCart","$mdMedia",function(t,e,r,n,i){t.ngCart=e}]),angular.module("productcatFilters",[]).filter("checkmark",function(){return function(t){return t?"✓":"✘"}}),angular.module("ngCart.directives",["ngCart.fulfilment"]).controller("CartController",["$scope","ngCart",function(t,e){t.ngCart=e}]).directive("ngcartAddtocart",["ngCart",function(t){return{restrict:"E",controller:"CartController",scope:{id:"@",name:"@",quantity:"@",quantityMax:"@",price:"@",data:"="},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"partials/Cart/addtocart.html":e.templateUrl},link:function(e,r,n){e.attrs=n,e.inCart=function(){return t.getItemById(n.id)},e.inCart()?e.q=t.getItemById(n.id).getQuantity():e.q=parseInt(e.quantity),e.qtyOpt=[];for(var i=1;i<=e.quantityMax;i++)e.qtyOpt.push(i)}}}]).directive("ngcartCart",[function(){return{restrict:"E",controller:"CartController",scope:{},templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"partials/Cart/cart.html":e.templateUrl},link:function(t,e,r){}}}]).directive("ngcartSummary",[function(){return{restrict:"E",controller:"CartController",scope:{},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"partials/Cart/summary.html":e.templateUrl}}}]).directive("ngcartCheckout",[function(){return{restrict:"E",controller:["$rootScope","$scope","ngCart","fulfilmentProvider",function(t,e,r,n){e.ngCart=r,e.checkout=function(){n.setService(e.service),n.setSettings(e.settings),n.checkout().success(function(e,r,n,i){t.$broadcast("ngCart:checkout_succeeded",e)}).error(function(e,r,n,i){t.$broadcast("ngCart:checkout_failed",{statusCode:r,error:e})})}}],scope:{service:"@",settings:"="},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"partials/Cart/checkout.html":e.templateUrl}}}]),angular.module("ngCart.fulfilment",[]).service("fulfilmentProvider",["$injector",function(t){this._obj={service:void 0,settings:void 0},this.setService=function(t){this._obj.service=t},this.setSettings=function(t){this._obj.settings=t},this.checkout=function(){var e=t.get("ngCart.fulfilment."+this._obj.service);return e.checkout(this._obj.settings)}}]).service("ngCart.fulfilment.log",["$q","$log","ngCart",function(t,e,r){this.checkout=function(){var n=t.defer();return e.info(r.toObject()),n.resolve({cart:r.toObject()}),n.promise}}]).service("ngCart.fulfilment.http",["$http","ngCart",function(t,e){this.checkout=function(r){return t.post(r.url,{data:e.toObject(),options:r.options})}}]).service("ngCart.fulfilment.paypal",["$http","ngCart",function(t,e){}]);var productcatServices=angular.module("productcatServices",["ngResource"]);productcatServices.factory("Product",["$resource",function(t){return t("products/:id.json",{},{query:{method:"GET",params:{id:"products"},isArray:!0}})}]),productcatServices.service("ngCart",["$rootScope","ngCartItem","store",function(t,e,r){this.init=function(){this.$cart={shipping:null,taxRate:null,tax:null,items:[]}},this.addItem=function(r,n,i,o,a){var c=this.getItemById(r);if("object"==typeof c)c.setQuantity(o,!1),t.$broadcast("ngCart:itemUpdated",c);else{var s=new e(r,n,i,o,a);this.$cart.items.push(s),t.$broadcast("ngCart:itemAdded",s)}t.$broadcast("ngCart:change",{})},this.getItemById=function(t){var e=this.getCart().items,r=!1;return angular.forEach(e,function(e){e.getId()===t&&(r=e)}),r},this.setShipping=function(t){return this.$cart.shipping=t,this.getShipping()},this.getShipping=function(){return 0===this.getCart().items.length?0:this.getCart().shipping},this.setTaxRate=function(t){return this.$cart.taxRate=+parseFloat(t).toFixed(2),this.getTaxRate()},this.getTaxRate=function(){return this.$cart.taxRate},this.getTax=function(){return+parseFloat(this.getSubTotal()/100*this.getCart().taxRate).toFixed(2)},this.setCart=function(t){return this.$cart=t,this.getCart()},this.getCart=function(){return this.$cart},this.getItems=function(){return this.getCart().items},this.getTotalItems=function(){var t=0,e=this.getItems();return angular.forEach(e,function(e){t+=e.getQuantity()}),t},this.getTotalUniqueItems=function(){return this.getCart().items.length},this.getSubTotal=function(){var t=0;return angular.forEach(this.getCart().items,function(e){t+=e.getTotal()}),+parseFloat(t).toFixed(2)},this.totalCost=function(){return+parseFloat(this.getSubTotal()+this.getShipping()+this.getTax()).toFixed(2)},this.removeItem=function(e){var r=this.$cart.items.splice(e,1)[0]||{};t.$broadcast("ngCart:itemRemoved",r),t.$broadcast("ngCart:change",{})},this.removeItemById=function(e){var r,n=this.getCart();angular.forEach(n.items,function(t,r){t.getId()===e&&(t=n.items.splice(r,1)[0]||{})}),this.setCart(n),t.$broadcast("ngCart:itemRemoved",r),t.$broadcast("ngCart:change",{})},this.empty=function(){t.$broadcast("ngCart:change",{}),this.$cart.items=[],localStorage.removeItem("cart")},this.isEmpty=function(){return this.$cart.items.length>0?!1:!0},this.toObject=function(){if(0===this.getItems().length)return!1;var t=[];return angular.forEach(this.getItems(),function(e){t.push(e.toObject())}),{shipping:this.getShipping(),tax:this.getTax(),taxRate:this.getTaxRate(),subTotal:this.getSubTotal(),totalCost:this.totalCost(),items:t}},this.$restore=function(t){var r=this;r.init(),r.$cart.shipping=t.shipping,r.$cart.tax=t.tax,angular.forEach(t.items,function(t){r.$cart.items.push(new e(t._id,t._name,t._price,t._quantity,t._data))}),this.$save()},this.$save=function(){return r.set("cart",JSON.stringify(this.getCart()))}}]),productcatServices.factory("ngCartItem",["$rootScope","$log",function(t,e){var r=function(t,e,r,n,i){this.setId(t),this.setName(e),this.setPrice(r),this.setQuantity(n),this.setData(i)};return r.prototype.setId=function(t){t?this._id=t:e.error("An ID must be provided")},r.prototype.getId=function(){return this._id},r.prototype.setName=function(t){t?this._name=t:e.error("A name must be provided")},r.prototype.getName=function(){return this._name},r.prototype.setPrice=function(t){var r=parseFloat(t);r?0>=r?e.error("A price must be over 0"):this._price=r:e.error("A price must be provided")},r.prototype.getPrice=function(){return this._price},r.prototype.setQuantity=function(t,r){var n=parseInt(t);n%1===0?(r===!0?this._quantity+=n:this._quantity=n,this._quantity<1&&(this._quantity=1)):(this._quantity=1,e.info("Quantity must be an integer and was defaulted to 1"))},r.prototype.getQuantity=function(){return this._quantity},r.prototype.setData=function(t){t&&(this._data=t)},r.prototype.getData=function(){return this._data?this._data:void e.info("This item has no data")},r.prototype.getTotal=function(){return+parseFloat(this.getQuantity()*this.getPrice()).toFixed(2)},r.prototype.toObject=function(){return{id:this.getId(),name:this.getName(),price:this.getPrice(),quantity:this.getQuantity(),data:this.getData(),total:this.getTotal()}},r}]),productcatServices.service("store",["$window",function(t){return{get:function(e){if(t.localStorage[e]){var r=angular.fromJson(t.localStorage[e]);return JSON.parse(r)}return!1},set:function(e,r){return void 0===r?t.localStorage.removeItem(e):t.localStorage[e]=angular.toJson(r),t.localStorage[e]}}}]);